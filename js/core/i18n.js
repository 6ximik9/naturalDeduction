export const translations = {
  SK: {
    "nav-system": "Systém",
    "nav-gentzen": "Gentzen",
    "nav-fitch": "Fitch",
    "nav-sequent": "Sekvent",
    "nav-data": "Dáta",
    "nav-upload": "Nahrať",
    "nav-example": "Príklad",
    "nav-support": "Podpora",
    "nav-help": "Pomoc",
    "nav-feedback": "Spätná väzba",
    "btn-proof": "Dôkaz",
    "theme-toggle": "Prepnúť tému",
    "font-size-label": "Veľkosť písma",
    "nav-home": "Domov",
    "nav-rules": "Pravidlá",
    "nav-axiom": "Axióma",
    "nav-tree": "Strom",
    "nav-undo": "Krok späť",
    "nav-redo": "Krok vpred",
    "nav-zoom-in": "Priblížiť",
    "nav-zoom-out": "Oddialiť",
    "nav-fit": "Prispôsiť",
    "nav-show-parens": "Zobraziť zátvorky",
    "nav-hide-parens": "Skryť zátvorky",
    "nav-original": "Originál",
    "nav-latex": "LaTeX zdroj",
    "label-all-hypotheses": "Všetky hypotézy",
    "label-current-hypotheses": "Aktuálne hypotézy",
    "tab-rules": "Pravidlá",
    "tab-axioms": "Axiómy",
    "tab-tree": "Strom",
    "help-title": "Pomoc a dokumentácia",
    "help-tab-general": "Všeobecné",
    "help-tab-syntax": "Syntax",
    "help-tab-input": "Vstup",
    "help-tab-axioms": "Axiómy",
    "section-greek": "Grécke písmená",
    "section-operations": "Operácie a syntax",
    "section-robinson": "Robinsonova aritmetika",
    "section-order": "Lineárne usporiadanie",
    "tooltip-resize": "Zmeniť veľkosť",
    "tooltip-select-branch": "Vyberte vetvu na dokázanie",
    "tooltip-select-node": "Kliknutím vyberte",
    "alert-single-formula": "Štýly Gentzen a Fitch vyžadujú v závere (pravá strana ⊢) jednu formulu.",
    "alert-missing-conclusion": "Štýly Gentzen a Fitch vyžadujú záver.",
    "alert-invalid-input": "Štýly Gentzen a Fitch očakávajú ako vstup jednu formulu (alebo sekvent s jedným záverom).",
    "alert-select-formula": "Prosím, vyberte jeden riadok s formulou",
    "alert-error-conversion": "Chyba pri konverzii výrazu. Skontrolujte formát.",
    "alert-missing-conjunction": "Chýbajúca konjunkcia, prosím, zmeňte vybrané riadky",
    "alert-missing-disjunction": "Chýbajúca disjunkcia, prosím, opravte vstup",
    "alert-correct-input": "Prosím, opravte vstup",
    "alert-missing-implication": "Chýbajúca implikácia, prosím, zmeňte vybrané riadky",
    "alert-missing-relation": "Chýbajúca relácia, prosím, opravte vstup",
    "alert-missing-absurdum": "Chýba absurdum, vetva musí končiť značkou absurdum",
    "alert-missing-negation": "Chýbajúca negácia, prosím, zmeňte vybrané riadky",
    "alert-forall-required": "Vybraná formula musí byť univerzálny kvantifikátor (∀)",
    "alert-exists-required": "Vybraná formula musí byť existenčný kvantifikátor (∃)",
    "alert-equality-required": "Jedna z formúl musí byť rovnosť (=)",
    "alert-cut-one-formula": "Pre pravidlo Cut zadajte presne jednu formulu.",
    "alert-invalid-formula": "Neplatná formula.",
    "alert-parse-error": "Chyba pri analýзе formuly. Skontrolujte syntax.",
    "alert-select-right": "Prosím, vyberte formulu na PRAVEJ strane.",
    "alert-select-left": "Prosím, vyberte formulu na ĽAVEJ strane.",
    "alert-not-conjunction": "Vybraná formula nie je konjunkcia.",
    "alert-not-disjunction": "Vybraná formula nie je disjunkcia.",
    "alert-not-applicable": "Pravidlo nie je použiteľné pre vybranú formulu.",
    "alert-var-not-fresh": "Premenná už existuje v sekvente (nie je čerstvá).",
    "alert-invalid-term": "Neplatný term.",
    "alert-error-parse-term": "Chyba pri analýze termu.",
    "alert-invalid-input-generic": "Neplatný vstup.",
    "btn-copy-latex": "Kopírovať LaTeX",
    "latex-title": "LaTeX zdroj",
    "latex-tab-proof": "Dôkaz",
    "latex-tab-document": "Dokument",
    "modal-btn-apply": "Použiť",
    "modal-btn-cancel": "Zrušiť",
    "modal-invalid-syntax": "Neplatná syntax",
    "modal-input-title-default": "Vstup termu",
    "modal-input-label-default": "Zadajte term:",
    "rule-identity-intro": "Úvod identity",
    "rule-cut": "Pravidlo rezu",
    "modal-exchange-desc": "Presuňte formuly na zmenu ich poradia:",
    "modal-btn-apply-order": "Použiť poradie",
    "modal-exists-intro-title": "Zavedenie existenčného kvantifikátora (∃I)",
    "modal-exists-intro-desc": "Vyberte formulu a špecifikujte substitúciu na zavedenie existenčného kvantifikátora:",
    "modal-select-hyp-formula": "Vyberte formulu z hypotéz:",
    "modal-choose-formula": "Vyberte formulu...",
    "modal-enter-custom-formula": "Alebo zadajte vlastnú formulu:",
    "modal-select-var-subst": "Vyberte premennú na substitúciu:",
    "modal-enter-replacement-term": "Zadajte náhradný term:",
    "modal-no-vars-available": "Žiadne premenné k dispozícii pre substitúciu",
    "modal-btn-apply-subst": "Použiť substitúciu",
    "modal-my-formula": "Moja formula",
    "notify-complete-fields": "Prosím, vyplňte všetky povinné polia.",
    "notify-enter-custom-formula": "Prosím, zadajte vlastnú formulu.",
    "notify-syntax-errors-custom": "V zadanej formule sú syntaktické chyby.",
    "notify-must-be-exists": "Vybraná formula musí byť existenčný kvantifikátor (∃).",
    "notify-invalid-format": "Neplatný formát formuly. Skontrolujte svoj výber.",
    "notify-invalid-syntax-term": "Neplatná syntax v náhradnom terme.",
    "notify-term-not-fresh": "Náhradný term nie je čerstvý (už sa nachádza v hypotézach).",
    "notify-unexpected-error": "Vyskytla sa neočakávaná chyba. Skúste to znova.",
    "modal-leibniz-title": "Leibnizovo pravidlo - Vyberte prvok formuly",
    "modal-leibniz-desc": "Kliknite na ľubovoľnú časť formuly nižšie a vyberte ju na nahradenie:",
    "modal-no-element-selected": "Nie je vybraný žiadny prvok",
    "modal-element-selected": "Vybrané:",
    "modal-enter-replacement-label": "Zadajte náhradu (najprv vyberte prvok formuly):",
    "modal-enter-replacement-active": "Zadajte náhradu:",
    "modal-btn-apply-replacement": "Použiť náhradu",
    "modal-subst-exists-elim-title": "Eliminácia existenčného kvantifikátora (∃E)",
    "modal-subst-forall-elim-title": "Eliminácia univerzálneho kvantifikátora (∀E)",
    "modal-subst-desc": "Vyberte premennú na substitúciu a zadajte náhradný term:",
    "modal-subst-forall-title": "Substitúcia univerzálneho kvantifikátora",
    "modal-subst-exists-title": "Substitúcia existenčného kvantifikátora",
    "modal-subst-var-desc": "Premenná \"{var}\" bude nahradená vaším zadaným termom:",
    "modal-subst-enter-for": "Zadajte náhradný term pre \"{var}\":",
    "rule-universal-quantifier": "Univerzálny kvantifikátor",
    "modal-enter-variable": "Zadajte premennú (napr. x):",
    "modal-enter-term": "Zadajte term (napr. c):",
    "modal-enter-cut-formula": "Zadajte formulu rezu (φ):",
    "modal-substitution-label": "Zadajte term (t) na substitúciu za \"{var}\":",
    "modal-eigenvariable-label": "Zadajte ČERSTVÚ premennú (y) na substitúciu za \"{var}\":",
    "confirm-latex-incomplete": "Nie všetky vetvy sú dokončené. Vygenerovaný LaTeX kód môže byť nesprávny. Pokračovať?",
    "confirm-proof-unfinished": "Dôkaz nie je dokončený, chcete pokračovať?",
    "confirm-return-main": "Naozaj sa chcete vrátiть na hlavnú stránku? Pokrok bude stratený.",
    "confirm-go-main": "Naozaj chcete ísť na hlavnú stránku?",
    "label-line": "Riadok",
    "label-col": "stĺpec"
  },
  EN: {
    "nav-system": "System",
    "nav-gentzen": "Gentzen",
    "nav-fitch": "Fitch",
    "nav-sequent": "Sequent",
    "nav-data": "Data",
    "nav-upload": "Upload",
    "nav-example": "Paste Example",
    "nav-support": "Support",
    "nav-help": "Help",
    "nav-feedback": "Feedback",
    "btn-proof": "Proof",
    "theme-toggle": "Switch Theme",
    "font-size-label": "Font Size",
    "nav-home": "Main Page",
    "nav-rules": "Rules",
    "nav-axiom": "Axiom",
    "nav-tree": "Tree",
    "nav-undo": "Undo Step",
    "nav-redo": "Redo Step",
    "nav-zoom-in": "Zoom In",
    "nav-zoom-out": "Zoom Out",
    "nav-fit": "Fit View",
    "nav-show-parens": "Show parentheses",
    "nav-hide-parens": "Hide parentheses",
    "nav-original": "Original",
    "nav-latex": "LaTeX Source",
    "label-all-hypotheses": "All Hypotheses",
    "label-current-hypotheses": "Current Hypotheses",
    "tab-rules": "Rules",
    "tab-axioms": "Axioms",
    "tab-tree": "Tree",
    "help-title": "Help & Documentation",
    "help-tab-general": "General",
    "help-tab-syntax": "Syntax",
    "help-tab-input": "Input",
    "help-tab-axioms": "Axioms",
    "section-greek": "Greek Letters",
    "section-operations": "Operations & Syntax",
    "section-robinson": "Robinson Arithmetic",
    "section-order": "Linear Order",
    "tooltip-resize": "Resize",
    "tooltip-select-branch": "Select a branch to prove",
    "tooltip-select-node": "Click to select",
    "alert-single-formula": "Gentzen and Fitch styles require a single formula in the conclusion (right side of ⊢).",
    "alert-missing-conclusion": "Gentzen and Fitch styles require a conclusion.",
    "alert-invalid-input": "Gentzen and Fitch styles expect a single formula as input (or a single-conclusion sequent).",
    "alert-select-formula": "Please select one line with the formula",
    "alert-error-conversion": "Error converting expression. Check format.",
    "alert-missing-conjunction": "Missing conjunction, please change the selected rows",
    "alert-missing-disjunction": "Missing disjunction, please correct your input",
    "alert-correct-input": "Please correct your input",
    "alert-missing-implication": "Missing implication, please change the selected rows",
    "alert-missing-relation": "Missing relation, please correct your input",
    "alert-missing-absurdum": "Missing absurdum, branch must end with an absurdum mark",
    "alert-missing-negation": "Missing negation, please change the selected rows",
    "alert-forall-required": "Selected formula must be a universal quantifier (∀)",
    "alert-exists-required": "Selected formula must be an existential quantifier (∃)",
    "alert-equality-required": "One of the formulas must be an equality (=)",
    "alert-cut-one-formula": "Please enter exactly one formula for the Cut rule.",
    "alert-invalid-formula": "Invalid formula.",
    "alert-parse-error": "Error parsing the formula. Please checks syntax.",
    "alert-select-right": "Please select a formula on the RIGHT side.",
    "alert-select-left": "Please select a formula on the LEFT side.",
    "alert-not-conjunction": "Selected formula is not a conjunction.",
    "alert-not-disjunction": "Selected formula is not a disjunction.",
    "alert-not-applicable": "Rule not applicable to selected formula.",
    "alert-var-not-fresh": "Variable already exists in the sequent (not fresh).",
    "alert-invalid-term": "Invalid term.",
    "alert-error-parse-term": "Error parsing term.",
    "alert-invalid-input-generic": "Invalid input.",
    "btn-copy-latex": "Copy LaTeX",
    "latex-title": "LaTeX Source",
    "latex-tab-proof": "Proof",
    "latex-tab-document": "Document",
    "modal-btn-apply": "Apply",
    "modal-btn-cancel": "Cancel",
    "modal-invalid-syntax": "Invalid syntax",
    "modal-input-title-default": "Input Term",
    "modal-input-label-default": "Enter term:",
    "rule-identity-intro": "Identity Introduction",
    "rule-cut": "Cut Rule",
    "modal-exchange-desc": "Drag and drop formulas to reorder them:",
    "modal-btn-apply-order": "Apply Order",
    "modal-exists-intro-title": "Existential Quantifier Introduction (∃I)",
    "modal-exists-intro-desc": "Select a formula and specify the substitution to introduce an existential quantifier:",
    "modal-select-hyp-formula": "Select formula from hypotheses:",
    "modal-choose-formula": "Choose a formula...",
    "modal-enter-custom-formula": "Or enter custom formula:",
    "modal-select-var-subst": "Select variable to substitute:",
    "modal-enter-replacement-term": "Enter replacement term:",
    "modal-no-vars-available": "No variables available for substitution",
    "modal-btn-apply-subst": "Apply Substitution",
    "modal-my-formula": "My formula",
    "notify-complete-fields": "Please complete all required fields.",
    "notify-enter-custom-formula": "Please enter a custom formula.",
    "notify-syntax-errors-custom": "There are syntax errors in the custom formula.",
    "notify-must-be-exists": "The selected formula must be an existential quantifier (∃).",
    "notify-invalid-format": "Invalid formula format. Please check your selection.",
    "notify-invalid-syntax-term": "Invalid syntax in the replacement term.",
    "notify-term-not-fresh": "The replacement term is not fresh (it already appears in the hypotheses).",
    "notify-unexpected-error": "An unexpected error occurred. Please try again.",
    "modal-leibniz-title": "Leibniz Rule - Select Formula Element",
    "modal-leibniz-desc": "Click on any part of the formula below to select it for replacement:",
    "modal-no-element-selected": "No element selected",
    "modal-element-selected": "Selected:",
    "modal-enter-replacement-label": "Enter replacement (select a formula element first):",
    "modal-enter-replacement-active": "Enter replacement:",
    "modal-btn-apply-replacement": "Apply Replacement",
    "modal-subst-exists-elim-title": "Existential Quantifier Elimination (∃E)",
    "modal-subst-forall-elim-title": "Universal Quantifier Elimination (∀E)",
    "modal-subst-desc": "Select a variable to substitute and enter the replacement term:",
    "modal-subst-forall-title": "Universal Quantifier Substitution",
    "modal-subst-exists-title": "Existential Quantifier Substitution",
    "modal-subst-var-desc": "Variable \"{var}\" will be replaced with your input term:",
    "modal-subst-enter-for": "Enter replacement term for \"{var}\":",
    "rule-universal-quantifier": "Universal Quantifier",
    "modal-enter-variable": "Enter variable (e.g. x):",
    "modal-enter-term": "Enter term (e.g. c):",
    "modal-enter-cut-formula": "Enter cut formula (φ):",
    "modal-substitution-label": "Enter term (t) to substitute for \"{var}\":",
    "modal-eigenvariable-label": "Enter FRESH variable (y) to substitute for \"{var}\":",
    "confirm-latex-incomplete": "Not all branches complete. Latex code generated may be incorrect. Continue?",
    "confirm-proof-unfinished": "The proof is not finished, do you want to continue?",
    "confirm-return-main": "Are you sure you want to return to the main page? Progress will be lost.",
    "confirm-go-main": "Are you sure you want to go to the main page?",
    "label-line": "Line",
    "label-col": "col"
  },
  UA: {
    "nav-system": "Система",
    "nav-gentzen": "Генцен",
    "nav-fitch": "Фітч",
    "nav-sequent": "Секвенція",
    "nav-data": "Дані",
    "nav-upload": "Завантажити",
    "nav-example": "Приклад",
    "nav-support": "Підтримка",
    "nav-help": "Допомога",
    "nav-feedback": "Відгук",
    "btn-proof": "Доведення",
    "theme-toggle": "Змінити тему",
    "font-size-label": "Розмір шрифту",
    "nav-home": "Головна",
    "nav-rules": "Правила",
    "nav-axiom": "Аксіома",
    "nav-tree": "Дерево",
    "nav-undo": "Крок назад",
    "nav-redo": "Крок вперед",
    "nav-zoom-in": "Збільшити",
    "nav-zoom-out": "Зменшити",
    "nav-fit": "Вписати",
    "nav-show-parens": "Показати дужки",
    "nav-hide-parens": "Приховати дужки",
    "nav-original": "Оригінал",
    "nav-latex": "Джерело LaTeX",
    "label-all-hypotheses": "Усі гіпотези",
    "label-current-hypotheses": "Поточні гіпотези",
    "tab-rules": "Правила",
    "tab-axioms": "Аксіоми",
    "tab-tree": "Дерево",
    "help-title": "Допомога та документація",
    "help-tab-general": "Загальне",
    "help-tab-syntax": "Синтаксис",
    "help-tab-input": "Введення",
    "help-tab-axioms": "Аксіоми",
    "section-greek": "Грецькі літери",
    "section-operations": "Операції та синтаксис",
    "section-robinson": "Арифметика Робінсона",
    "section-order": "Лінійний порядок",
    "tooltip-resize": "Змінити розмір",
    "tooltip-select-branch": "Виберіть гілку для доведення",
    "tooltip-select-node": "Натисніть, щоб вибрати",
    "alert-single-formula": "Стилі Генцена та Фітча вимагають одну формулу у висновку (права частина ⊢).",
    "alert-missing-conclusion": "Стилі Генцена та Фітча вимагають наявності висновку.",
    "alert-invalid-input": "Стилі Генцена та Фітча очікують одну формулу як вхідні дані (або секвенцію з одним висновком).",
    "alert-select-formula": "Будь ласка, виберіть один рядок з формулою",
    "alert-error-conversion": "Помилка при конвертації виразу. Перевірте формат.",
    "alert-missing-conjunction": "Відсутня кон'юнкція, будь ласка, змініть вибрані рядки",
    "alert-missing-disjunction": "Відсутня диз'юнкція, будь ласка, виправте введення",
    "alert-correct-input": "Будь ласка, виправте введення",
    "alert-missing-implication": "Відсутня імплікація, будь ласка, змініть вибрані рядки",
    "alert-missing-relation": "Відсутнє відношення, будь ласка, виправте введення",
    "alert-missing-absurdum": "Відсутній абсурд, гілка має закінчуватися знаком абсурду",
    "alert-missing-negation": "Відсутнє заперечення, будь ласка, змініть вибрані рядки",
    "alert-forall-required": "Вибрана формула має бути універсальним квантифікатором (∀)",
    "alert-exists-required": "Вибрана формула має бути квантифікатором існування (∃)",
    "alert-equality-required": "Одна з формул має бути рівністю (=)",
    "alert-cut-one-formula": "Для правила Cut введіть рівно одну формулу.",
    "alert-invalid-formula": "Некоректна формула.",
    "alert-parse-error": "Помилка аналізу формули. Перевірте синтаксис.",
    "alert-select-right": "Будь ласка, виберіть формулу на ПРАВІЙ стороні.",
    "alert-select-left": "Будь ласка, виберіть формулу на ЛІВІЙ стороні.",
    "alert-not-conjunction": "Вибрана формула не є кон'юнкцією.",
    "alert-not-disjunction": "Вибрана формула не є диз'юнкцією.",
    "alert-not-applicable": "Правило не застосовується до вибраної формули.",
    "alert-var-not-fresh": "Змінна вже існує у секвенції (не є свіжою).",
    "alert-invalid-term": "Некоректний терм.",
    "alert-error-parse-term": "Помилка аналізу терму.",
    "alert-invalid-input-generic": "Некоректне введення.",
    "btn-copy-latex": "Копіювати LaTeX",
    "latex-title": "Джерело LaTeX",
    "latex-tab-proof": "Доведення",
    "latex-tab-document": "Документ",
    "modal-btn-apply": "Застосувати",
    "modal-btn-cancel": "Скасувати",
    "modal-invalid-syntax": "Некоректний синтаксис",
    "modal-input-title-default": "Введення терму",
    "modal-input-label-default": "Введіть терм:",
    "rule-identity-intro": "Введення ідентичності",
    "rule-cut": "Правило резу",
    "modal-exchange-desc": "Перетягніть формули, щоб змінити їх порядок:",
    "modal-btn-apply-order": "Застосувати порядок",
    "modal-exists-intro-title": "Введення квантифікатора існування (∃I)",
    "modal-exists-intro-desc": "Виберіть формулу та вкажіть заміну для введення квантифікатора існування:",
    "modal-select-hyp-formula": "Виберіть формулу з гіпотез:",
    "modal-choose-formula": "Оберіть формулу...",
    "modal-enter-custom-formula": "Або введіть власну формулу:",
    "modal-select-var-subst": "Виберіть змінну для заміни:",
    "modal-enter-replacement-term": "Введіть терм для заміни:",
    "modal-no-vars-available": "Немає доступних змінних для заміни",
    "modal-btn-apply-subst": "Застосувати заміну",
    "modal-my-formula": "Моя формула",
    "notify-complete-fields": "Будь ласка, заповніть всі обов'язкові поля.",
    "notify-enter-custom-formula": "Будь ласка, введіть власну формулу.",
    "notify-syntax-errors-custom": "У власній формулі є синтаксичні помилки.",
    "notify-must-be-exists": "Вибрана формула має бути квантифікатором існування (∃).",
    "notify-invalid-format": "Некоректний формат формули. Будь ласка, перевірте свій вибір.",
    "notify-invalid-syntax-term": "Некоректний синтаксис у термі заміни.",
    "notify-term-not-fresh": "Терм заміни не є свіжим (він вже є у гіпотезах).",
    "notify-unexpected-error": "Сталася неочікувана помилка. Спробуйте ще раз.",
    "modal-leibniz-title": "Правило Лейбніца - Виберіть елемент формули",
    "modal-leibniz-desc": "Натисноть на будь-яку частину формули нижче, щоб вибрати її для заміни:",
    "modal-no-element-selected": "Елемент не вибрано",
    "modal-element-selected": "Вибрано:",
    "modal-enter-replacement-label": "Введіть заміну (спочатку виберіть елемент формули):",
    "modal-enter-replacement-active": "Введіть заміну:",
    "modal-btn-apply-replacement": "Застосувати заміну",
    "modal-subst-exists-elim-title": "Елімінація квантифікатора існування (∃E)",
    "modal-subst-forall-elim-title": "Елімінація універсального квантифікатора (∀E)",
    "modal-subst-desc": "Виберіть змінну для заміни та введіть терм заміни:",
    "modal-subst-forall-title": "Заміна універсального квантифікатора",
    "modal-subst-exists-title": "Заміна квантифікатора існування",
    "modal-subst-var-desc": "Змінна \"{var}\" буде замінена вашим введеним термом:",
    "modal-subst-enter-for": "Введіть терм заміни для \"{var}\":",
    "rule-universal-quantifier": "Універсальний квантифікатор",
    "modal-enter-variable": "Введіть змінну (напр. x):",
    "modal-enter-term": "Введіть терм (напр. c):",
    "modal-enter-cut-formula": "Введіть формулу резу (φ):",
    "modal-substitution-label": "Введіть терм (t) для заміни \"{var}\":",
    "modal-eigenvariable-label": "Введіть СВІЖУ змінну (y) для заміни \"{var}\":",
    "confirm-latex-incomplete": "Не всі гілки завершені. Згенерований LaTeX код може бути некоректним. Продовжити?",
    "confirm-proof-unfinished": "Доведення не завершене, ви хочете продовжити?",
    "confirm-return-main": "Ви впевнені, що хочете повернутися на головну сторінку? Прогрес буде втрачено.",
    "confirm-go-main": "Ви впевнені, що хочете перейти на головну сторінку?",
    "label-line": "Рядок",
    "label-col": "стовп"
  }
};

export function t(key) {
    const lang = localStorage.getItem('selectedLang') || 'EN';
    return translations[lang] && translations[lang][key] ? translations[lang][key] : key;
}

export function updateLanguage(lang) {
  const tArr = translations[lang];
  if (!tArr) return;

  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (tArr[key]) {
      // Check if it's a select option
      if (el.tagName === 'OPTION') {
          // If it's font-size-label, we want to keep the " : 20px" part
          if (key === 'font-size-label') {
              const fontSize = el.value;
              el.textContent = `${tArr[key]}: ${fontSize}px`;
          } else {
              el.textContent = tArr[key];
          }
      } else {
          // Handle elements with icons (SVGs or <i>)
          const svg = el.querySelector('svg');
          const icon = el.querySelector('i');
          if (svg || icon) {
              // We need to preserve the SVG/icon and only change the text node
              el.childNodes.forEach(node => {
                  if (node.nodeType === Node.TEXT_NODE) {
                      const trimmed = node.textContent.trim();
                      if (trimmed.length > 0) {
                          node.textContent = ' ' + tArr[key];
                      }
                  }
              });
          } else {
              el.textContent = tArr[key];
          }
      }
    }
  });

  // Update titles for tooltips
  document.querySelectorAll('[data-i18n-title]').forEach(el => {
    const key = el.getAttribute('data-i18n-title');
    if (tArr[key]) {
      el.setAttribute('title', tArr[key]);
    }
  });
  
  localStorage.setItem('selectedLang', lang);
}
